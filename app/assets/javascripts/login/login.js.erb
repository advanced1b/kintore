var Login = function() {
  //半角アルファベット（大文字･小文字）もしくは数字のみ
  jQuery.validator.addMethod("alphanum", function(value, element) {
    return this.optional(element) || /^([0-9A-Za-z_.-]+)$/.test(value);
    }, "半角英数字を入力してください"
  );
  var handleLogin = function() {
    var login_form = $('#login-form');
    var error =   $('.alert-danger', login_form);
    var success = $('.alert-success', login_form);
    login_form.validate({
        errorElement: 'span',
        errorClass: 'help-block',
        focusInvalid: false,
        rules: {
          "login": {
            required: true
          },
          "password": {
            required: true
          }
       },

      messages: {
        "login": {
          required: jQuery.validator.format("ログインIDを入力してください。")
        },
        "password": {
          required:  jQuery.validator.format("パスワードを入力してください。")
        }
      },

      invalidHandler: function (event, validator) { //display error alert on form submit
          success.hide();
          error.show();
          Metronic.scrollTo(error, -200);
      },

      highlight: function (element) { // hightlight error inputs
          $(element)
              .closest('.form-group').removeClass('has-success').addClass('has-error'); // set error class to the control group
          $(element).addClass('edited');
      },

      unhighlight: function (element) { // revert the change done by hightlight
          $(element)
              .closest('.form-group').removeClass('has-error'); // set error class to the control group
          $(element).removeClass('edited');
      },

      success: function (label) {
          label
              .closest('.form-group').removeClass('has-error').addClass('has-success'); // set success class to the control group
      }
    });

    $('.login-form input').keypress(function(e) {
      if (e.which == 13) {
          if ($('.login-form').validate().form()) {
              $('.login-form').submit();
          }
          return false;
      }
    });
  }

  return {
    init: function() {
      handleLogin();

      $('.login-bg').backstretch([
                '<%= asset_path "images/admin/bg1.jpg" %>',
                '<%= asset_path "images/admin/bg2.jpg" %>',
                '<%= asset_path "images/admin/bg3.jpg" %>'
                ], {
                  fade: 1000,
                  duration: 8000
                }
            );

            $('.forget-form').hide();
    }
  };
}();
